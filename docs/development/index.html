<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.74.3" />

<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">

<link rel="alternate" type="application/rss&#43;xml" href="https://quarks.suse.dev/docs/development/index.xml">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Development | Quarks Project</title><meta property="og:title" content="Development" />
<meta property="og:description" content="Shared documentation for the Quarks operators
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://quarks.suse.dev/docs/development/" />
<meta property="og:site_name" content="Quarks Project" />
<meta itemprop="name" content="Development">
<meta itemprop="description" content="Shared documentation for the Quarks operators
">
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Development"/>
<meta name="twitter:description" content="Shared documentation for the Quarks operators
"/>







<link rel="preload" href="/scss/main.min.2148fae8c7aabe0884a9b47f1fc7546abac360ad00911dd8b4f5160fca6f5bc4.css" as="style">
<link href="/scss/main.min.2148fae8c7aabe0884a9b47f1fc7546abac360ad00911dd8b4f5160fca6f5bc4.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>



  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg id="svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="394.7368421052631" viewBox="0  0, 400,394.7368421052631"><g id="svgg"><path id="path0" d="M145.181 8.554C145.035 8.699 144.916 9.852 144.916 11.116V13.412L134.551 13.518 124.186 13.623 124.068 16.079 123.951 18.536 118.738 18.646 113.524 18.756 113.408 21.41 113.291 24.064 108.274 24.174 103.258 24.284 103.14 26.741 103.023 29.197 97.81 29.308 92.596 29.418 92.479 31.874 92.362 34.331 87.148 34.441 81.935 34.551 81.819 37.198 81.702 39.845 79.252 39.962 76.802 40.079 76.684 42.529 76.567 44.978 74.118 45.095 71.668 45.212 71.551 47.669 71.434 50.125 66.22 50.235 61.007 50.346 60.891 52.992 60.774 55.639 58.324 55.757 55.874 55.874 55.757 58.324 55.639 60.774 52.992 60.891 50.346 61.007 50.228 63.456 50.111 65.906 47.662 66.023 45.212 66.14 45.102 71.354 44.992 76.567 42.536 76.684 40.079 76.802 39.962 79.252 39.845 81.702 37.198 81.819 34.551 81.935 34.435 84.582 34.318 87.229 31.868 87.346 29.418 87.463 29.307 92.479 29.197 97.495 26.741 97.612 24.284 97.73 24.168 100.377 24.052 103.025 21.404 103.141 18.756 103.258 18.646 108.274 18.535 113.29 16.079 113.407 13.623 113.524 13.516 121.304 13.409 129.084 10.949 129.202 8.49 129.319V144.916 160.513L13.506 160.624 18.522 160.734 18.639 163.19 18.756 165.647 21.403 165.763 24.05 165.879 24.167 168.33 24.284 170.78 26.735 170.897 29.185 171.014 29.301 173.661 29.418 176.308 34.631 176.418 39.844 176.528 39.962 178.985 40.079 181.441 42.529 181.558 44.978 181.675 45.095 184.125 45.212 186.575 50.426 186.685 55.641 186.795 55.757 189.449 55.874 192.103H63.376 70.879L70.983 178.992 71.087 165.881 73.549 165.764 76.012 165.647 76.119 157.866 76.226 150.085 78.883 149.968 81.54 149.852 81.65 144.638 81.76 139.425 84.217 139.308 86.673 139.191 86.79 136.741 86.907 134.291 89.357 134.174 91.807 134.057 91.917 128.843 92.027 123.629 94.681 123.512 97.335 123.396 97.452 120.946 97.569 118.497 100.018 118.38 102.468 118.263 102.585 115.813 102.702 113.363 105.152 113.246 107.601 113.129 107.718 110.482 107.834 107.834 110.482 107.718 113.129 107.601 113.246 105.152 113.363 102.702 115.813 102.585 118.263 102.468 118.38 100.011 118.497 97.555 123.711 97.445 128.924 97.335 129.04 94.681 129.157 92.027 134.174 91.917 139.191 91.807 139.308 89.35 139.425 86.893 144.638 86.783 149.852 86.673 149.969 84.212 150.087 81.75 160.433 81.645 170.78 81.54 170.897 78.875 171.013 76.209H192.318 213.623V78.973 81.737H221.52 229.418V84.304 86.871H237.315 245.212V89.437 92.004H247.761 250.309L250.426 94.669 250.543 97.335 255.775 97.445 261.007 97.555V100.11 102.665H263.555 266.102L266.22 105.133 266.338 107.601 268.788 107.718 271.238 107.835 271.355 110.482 271.471 113.129 274.136 113.246 276.802 113.363V115.911 118.46H279.349 281.897L282.015 120.928 282.132 123.396 284.583 123.513 287.033 123.63 287.149 126.277 287.266 128.924 289.931 129.041 292.596 129.158V134.273 139.388H295.151 297.707L297.817 144.62 297.927 149.852 300.384 149.969 302.84 150.086 302.95 155.3 303.06 160.513 305.726 160.63 308.391 160.747V171.193 181.639H310.949 313.507L313.615 189.437 313.722 197.236 324.068 197.341 334.415 197.446 334.532 199.908 334.65 202.369H355.38 376.111L376.228 199.901 376.346 197.433H378.893 381.441V179.072 160.711H378.881 376.321L376.216 150.346 376.111 139.98 373.651 139.863 371.191 139.746 371.084 131.966 370.977 124.186 368.312 124.069 365.647 123.952V118.639 113.327H363.092 360.537L360.426 108.292 360.316 103.258 357.859 103.14 355.403 103.023 355.293 97.81 355.183 92.596 352.517 92.479 349.852 92.363V89.814 87.266H347.297 344.742L344.631 82.034 344.521 76.802 342.072 76.684 339.622 76.567 339.505 74.118 339.388 71.668 336.723 71.552 334.057 71.435V68.689 65.943H331.509 328.962L328.844 63.475 328.727 61.007 326.277 60.89 323.827 60.773 323.71 58.323 323.593 55.874 320.928 55.757 318.263 55.64V52.894 50.148H315.715 313.167L313.049 47.68 312.932 45.212 307.7 45.102 302.468 44.992V42.437 39.882H299.919 297.371L297.254 37.216 297.137 34.551 291.905 34.441 286.673 34.33V31.775 29.22H281.559 276.444L276.327 26.752 276.209 24.284 270.995 24.174 265.781 24.064 265.664 21.41 265.548 18.756 260.316 18.646 255.084 18.536V15.981 13.425H244.639 234.194L234.076 10.958 233.959 8.49 189.702 8.389C165.361 8.334 145.327 8.408 145.181 8.554" stroke="none" fill="#fff" fill-rule="evenodd"/><path id="path1" d="M3.03 192.561C2.884 192.707 2.764 193.952 2.764 195.327V197.828H1.382.0V210.859 223.889H1.377 2.753L2.857 236.821 2.962 249.753 5.619 249.87 8.276 249.986 8.383 257.767 8.49 265.548 10.949 265.665 13.409 265.783 13.516 273.563 13.623 281.343 16.079 281.46 18.536 281.577 18.646 286.791 18.756 292.004 21.403 292.12 24.05 292.237 24.167 294.687 24.284 297.137 26.741 297.254 29.197 297.372 29.308 302.585 29.418 307.799 31.867 307.916 34.317 308.033 34.434 310.482 34.551 312.932 37.199 313.048 39.846 313.165 39.963 315.812 40.079 318.46 42.535 318.577 44.991 318.695 45.102 323.711 45.212 328.727 47.663 328.844 50.113 328.961 50.229 331.608 50.346 334.255 52.992 334.371 55.639 334.487 55.757 336.938 55.874 339.388 58.323 339.505 60.773 339.622 60.89 342.072 61.007 344.521 66.221 344.631 71.435 344.741 71.552 347.395 71.668 350.049 74.118 350.166 76.567 350.284 76.684 352.733 76.802 355.183 79.251 355.3 81.701 355.417 81.818 357.866 81.935 360.316 87.149 360.426 92.363 360.536 92.48 363.19 92.596 365.844 97.81 365.954 103.023 366.064 103.14 368.521 103.258 370.977 108.274 371.088 113.29 371.198 113.407 373.654 113.524 376.111 118.738 376.221 123.953 376.331 124.069 378.985 124.186 381.639 134.532 381.744 144.879 381.849 144.996 384.311 145.114 386.772h44.422 44.423L234.076 384.304 234.194 381.836H244.639 255.084V379.084 376.331L260.316 376.221 265.548 376.111 265.665 373.654 265.782 371.197 270.996 371.087 276.209 370.977 276.327 368.509 276.444 366.041H281.559 286.673V363.289 360.536L291.905 360.426 297.137 360.316 297.255 357.848 297.372 355.38H299.92 302.468V352.825 350.27L307.7 350.16 312.932 350.049 313.049 347.384 313.165 344.719H315.714 318.263V342.17 339.621L320.928 339.505 323.593 339.388 323.71 336.938 323.827 334.489 326.277 334.372 328.727 334.255 328.843 331.589 328.96 328.924H331.509 334.057V326.375 323.827L336.723 323.71 339.388 323.593 339.505 321.144 339.622 318.694 342.072 318.577 344.521 318.46 344.631 313.228 344.742 307.996H347.297 349.852V305.447 302.899L352.517 302.782 355.183 302.665 355.293 297.452 355.403 292.238 357.859 292.121 360.316 292.004 360.426 286.772 360.536 281.54H363.091 365.647V276.425 271.31L368.312 271.193 370.977 271.076 371.084 263.296 371.191 255.516 373.651 255.399 376.111 255.281V247.581 239.882L373.661 239.764 371.211 239.647 371.094 237.198 370.977 234.748 368.312 234.632 365.647 234.515V231.966 229.418H360.531 355.416L355.299 226.752 355.183 224.087 352.517 223.97 349.852 223.853V221.305 218.756H347.304 344.756L344.639 216.288 344.521 213.82 339.289 213.71 334.057 213.6V210.847 208.095H331.509 328.962L328.844 205.627 328.727 203.159H321.224 313.722L313.611 208.391 313.501 213.623H310.946 308.391V224.069 234.515L305.726 234.632 303.06 234.748 302.95 239.962 302.84 245.175 300.384 245.292 297.927 245.41 297.816 250.444 297.706 255.479H295.151 292.596V260.791 266.104L289.931 266.221 287.266 266.338 287.148 268.787 287.031 271.237 284.582 271.354 282.132 271.471 282.016 274.136 281.899 276.802H279.35 276.802V279.35 281.899L274.136 282.016 271.471 282.132 271.354 284.582 271.237 287.031 268.787 287.148 266.338 287.266 266.221 289.931 266.104 292.596H263.556 261.007V295.151 297.707L255.775 297.817 250.543 297.927 250.425 300.395 250.308 302.863H247.76 245.212V305.627 308.391H237.315 229.418V310.958 313.524H221.52 213.623V316.091 318.657H189.752 165.882L165.764 316.19 165.647 313.722 157.867 313.615 150.087 313.508 149.969 311.048 149.852 308.588 144.638 308.478 139.424 308.368 139.307 305.714 139.191 303.06 134.175 302.95 129.159 302.839 129.041 300.383 128.924 297.927 123.711 297.817 118.497 297.707 118.38 295.25 118.263 292.794 115.812 292.677 113.362 292.559 113.246 289.913 113.129 287.266 110.482 287.149 107.835 287.033 107.718 284.583 107.601 282.132 105.152 282.015 102.702 281.898 102.585 279.449 102.468 276.999 100.018 276.882 97.567 276.765 97.451 274.118 97.335 271.471 94.681 271.354 92.027 271.238 91.917 266.221 91.807 261.204 89.356 261.087 86.906 260.97 86.79 258.323 86.673 255.676 84.217 255.559 81.761 255.442 81.65 250.426 81.54 245.41 78.883 245.293 76.226 245.177 76.119 237.396 76.012 229.615 73.548 229.498 71.085 229.38 70.982 213.703 70.879 198.026 65.664 197.916 60.45 197.806 60.334 195.152 60.217 192.498 31.756 192.396C16.103 192.341 3.176 192.415 3.03 192.561" stroke="none" fill="#14241c" fill-rule="evenodd"/><path id="path2" stroke="none" fill="#0cc0b0" fill-rule="evenodd"/><path id="path3" stroke="none" fill="#0cc0b0" fill-rule="evenodd"/><path id="path4" stroke="none" fill="#0cc0b0" fill-rule="evenodd"/></g></svg></span><span class="text-uppercase font-weight-bold">Quarks Project</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/community/" ><span>Community</span></a>
			</li>
			
			
			<li class="nav-item dropdown d-none d-lg-block">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Releases
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/docs">main</a>
	
	<a class="dropdown-item" href="https://quarks-v6.cap.explore.suse.dev/docs">v6.x</a>
	
	<a class="dropdown-item" href="https://github.com/cloudfoundry-incubator/quarks-operator/tree/v5.0.x/docs">v5.x</a>
	
	<a class="dropdown-item" href="https://github.com/cloudfoundry-incubator/quarks-operator/tree/v4.0.x/docs">v4.x</a>
	
</div>

			</li>
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.07339e16a855208a1a80c4a1ba1793183f6d3f4cd19e3972dc1218a27fa5a416d9e4ece63d39c9b87784254cfd02d15c816c0a3ec01d5981c8d2c666263bed01.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <div id="content-mobile">
  <form class="td-sidebar__search d-flex align-items-center">
    


<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.07339e16a855208a1a80c4a1ba1793183f6d3f4cd19e3972dc1218a27fa5a416d9e4ece63d39c9b87784254cfd02d15c816c0a3ec01d5981c8d2c666263bed01.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  </div>
  <div id="content-desktop"></div>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/quarks-operator/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Quarks Operator</a>
  </li>
  <ul>
    <li class="collapse " id="docsquarks-operator">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatoroverview" href="/docs/quarks-operator/overview/">Overview</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorinstall" href="/docs/quarks-operator/install/">Install</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/quarks-operator/cli/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">CLI</a>
  </li>
  <ul>
    <li class="collapse " id="docsquarks-operatorcli">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorclicf-operator" href="/docs/quarks-operator/cli/cf-operator/">cf-operator</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorclicf-operator_util" href="/docs/quarks-operator/cli/cf-operator_util/">cf-operator util</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorclicf-operator_util_instance-group" href="/docs/quarks-operator/cli/cf-operator_util_instance-group/">cf-operator util instance-group</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorclicf-operator_util_tail-logs" href="/docs/quarks-operator/cli/cf-operator_util_tail-logs/">cf-operator util tail-logs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorclicf-operator_util_template-render" href="/docs/quarks-operator/cli/cf-operator_util_template-render/">cf-operator util template-render</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorclicf-operator_util_variable-interpolation" href="/docs/quarks-operator/cli/cf-operator_util_variable-interpolation/">cf-operator util variable-interpolation</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorclicf-operator_util_wait" href="/docs/quarks-operator/cli/cf-operator_util_wait/">cf-operator util wait</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorclicf-operator_version" href="/docs/quarks-operator/cli/cf-operator_version/">cf-operator version</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorcliquarks-operator" href="/docs/quarks-operator/cli/quarks-operator/">quarks-operator</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorcliquarks-operator_util" href="/docs/quarks-operator/cli/quarks-operator_util/">quarks-operator util</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorcliquarks-operator_util_instance-group" href="/docs/quarks-operator/cli/quarks-operator_util_instance-group/">quarks-operator util instance-group</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorcliquarks-operator_util_tail-logs" href="/docs/quarks-operator/cli/quarks-operator_util_tail-logs/">quarks-operator util tail-logs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorcliquarks-operator_util_template-render" href="/docs/quarks-operator/cli/quarks-operator_util_template-render/">quarks-operator util template-render</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorcliquarks-operator_util_wait" href="/docs/quarks-operator/cli/quarks-operator_util_wait/">quarks-operator util wait</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorcliquarks-operator_version" href="/docs/quarks-operator/cli/quarks-operator_version/">quarks-operator version</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/quarks-operator/concepts/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a>
  </li>
  <ul>
    <li class="collapse " id="docsquarks-operatorconcepts">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorconceptsfrom_bosh_to_kube" href="/docs/quarks-operator/concepts/from_bosh_to_kube/">Transforming BOSH concepts to Kubernetes</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorconceptsdesired_manifests" href="/docs/quarks-operator/concepts/desired_manifests/">Desired Manifests</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorconceptsvariables" href="/docs/quarks-operator/concepts/variables/">BOSH Variables</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorconceptsrendering_templates" href="/docs/quarks-operator/concepts/rendering_templates/">Rendering BOSH Templates</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorconceptsresources_limit" href="/docs/quarks-operator/concepts/resources_limit/">BOSH resource requests and limits</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorconceptsentanglements" href="/docs/quarks-operator/concepts/entanglements/">Entanglements</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorconceptsprocess_control" href="/docs/quarks-operator/concepts/process_control/">Process Control</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorconceptsrotation_and_restart" href="/docs/quarks-operator/concepts/rotation_and_restart/">Rotation and Restart</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatorconceptswaiting_services" href="/docs/quarks-operator/concepts/waiting_services/">Waiting for services</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatortroubleshooting" href="/docs/quarks-operator/troubleshooting/">Troubleshooting</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/quarks-operator/development/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Development</a>
  </li>
  <ul>
    <li class="collapse " id="docsquarks-operatordevelopment">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatordevelopmentreleasing" href="/docs/quarks-operator/development/releasing/">Releasing</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/quarks-operator/development/controllers/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Controllers</a>
  </li>
  <ul>
    <li class="collapse " id="docsquarks-operatordevelopmentcontrollers">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatordevelopmentcontrollersbosh_deployment" href="/docs/quarks-operator/development/controllers/bosh_deployment/">BOSH Deployment</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatordevelopmentcontrollersquarks_restart" href="/docs/quarks-operator/development/controllers/quarks_restart/">Quarks restart</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-operatordevelopmentlabels" href="/docs/quarks-operator/development/labels/">Labels</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/quarks-job/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Quarks Job</a>
  </li>
  <ul>
    <li class="collapse " id="docsquarks-job">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/quarks-job/cli/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">CLI</a>
  </li>
  <ul>
    <li class="collapse " id="docsquarks-jobcli">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-jobcliquarks-job" href="/docs/quarks-job/cli/quarks-job/">quarks-job</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-jobcliquarks-job_persist-output" href="/docs/quarks-job/cli/quarks-job_persist-output/">quarks-job persist-output</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-jobcliquarks-job_version" href="/docs/quarks-job/cli/quarks-job_version/">quarks-job version</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/quarks-job/development/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Development</a>
  </li>
  <ul>
    <li class="collapse " id="docsquarks-jobdevelopment">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/quarks-secret/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Quarks Secret</a>
  </li>
  <ul>
    <li class="collapse " id="docsquarks-secret">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/quarks-secret/cli/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">CLI</a>
  </li>
  <ul>
    <li class="collapse " id="docsquarks-secretcli">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-secretcliquarks-secret" href="/docs/quarks-secret/cli/quarks-secret/">quarks-secret</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-secretcliquarks-secret_version" href="/docs/quarks-secret/cli/quarks-secret_version/">quarks-secret version</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-secrettasks" href="/docs/quarks-secret/tasks/">Tasks</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/quarks-secret/development/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Development</a>
  </li>
  <ul>
    <li class="collapse " id="docsquarks-secretdevelopment">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/quarks-statefulset/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Quarks Statefulset</a>
  </li>
  <ul>
    <li class="collapse " id="docsquarks-statefulset">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/quarks-statefulset/development/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Development</a>
  </li>
  <ul>
    <li class="collapse " id="docsquarks-statefulsetdevelopment">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsquarks-statefulsetdevelopmentstatefulsetrollout" href="/docs/quarks-statefulset/development/statefulsetrollout/">StatefulSet Rollout</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/development/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Development</a>
  </li>
  <ul>
    <li class="collapse show" id="docsdevelopment">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsdevelopmentbuilding" href="/docs/development/building/">Build quarks-operator</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsdevelopmenttesting" href="/docs/development/testing/">Testing</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsdevelopmenttooling" href="/docs/development/tooling/">Tooling</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsdevelopmentnaming" href="/docs/development/naming/">Naming Conventions</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsdevelopmentabout_operators" href="/docs/development/about_operators/">About operators</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/contribution-guidelines/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contribution Guidelines</a>
  </li>
  <ul>
    <li class="collapse " id="docscontribution-guidelines">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">





<a href="https://github.com/cloudfoundry-incubator/quarks-docs/edit/master/content/en/docs/Development/_index.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudfoundry-incubator/quarks-docs/issues/new?title=Development" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/cloudfoundry-incubator/quarks-operator/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#requirements">Requirements</a></li>
    <li><a href="#custom-resource-definitions-crds">Custom Resource Definitions (CRDs)</a></li>
    <li><a href="#creating-a-new-resource-and-controller">Creating a new Resource and Controller</a>
      <ul>
        <li><a href="#reconcile-results">Reconcile Results</a></li>
        <li><a href="#testing">Testing</a></li>
      </ul>
    </li>
    <li><a href="#create-or-update-pattern">Create-Or-Update pattern</a></li>
    <li><a href="#logging-and-events">Logging and Events</a></li>
    <li><a href="#standalone-components">Standalone Components</a>
      <ul>
        <li><a href="#references-in-cf-operator">References in cf-operator</a></li>
        <li><a href="#update-dependencies">Update Dependencies</a></li>
        <li><a href="#local-development-and-go-mod-replace">Local Development And go mod &lsquo;replace&rsquo;</a></li>
        <li><a href="#building-docker-image-when-using-go-mod-replace">Building Docker Image When Using go mod &lsquo;replace&rsquo;</a></li>
        <li><a href="#use-a-local-quarksjob-image-in-integration-tests">Use a Local QuarksJob Image in Integration Tests</a></li>
        <li><a href="#use-a-local-quarksjob-image-in-integration-tests-with-kubernetes-for-docker-desktop">Use a Local QuarksJob Image in Integration Tests with Kubernetes for Docker Desktop</a></li>
        <li><a href="#merging-prs">Merging PRs</a></li>
      </ul>
    </li>
    <li><a href="#versioning">Versioning</a></li>
    <li><a href="#colourise-logs">Colourise Logs</a></li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		







<li class="breadcrumb-item" >
	<a href="https://quarks.suse.dev/docs/">Documentation</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://quarks.suse.dev/docs/development/">Development</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Development</h1>
        <div class="lead">Shared documentation for the Quarks operators</div>
	
	

<div class="pageinfo pageinfo-primary">
<p>The quarks-* operators share some common scripts, that are in the <a href="https://github.com/cloudfoundry-incubator/quarks-utils/"><code>quarks-utils</code> project</a>. You can run <code>bin/tools</code> to download them. Or download them manually from <code>quarks-utils</code>.</p>
<p>Some scripts require the <code>PROJECT</code> env var to be set, e.g. <code>PROJECT=quarks-secret</code>.</p>

</div>

<h2 id="requirements">Requirements</h2>
<ul>
<li>A working Kubernetes cluster</li>
<li>Helm v3 binary</li>
<li>Go 1.14 and install the tool chain: <code>make tools</code></li>
</ul>
<h2 id="custom-resource-definitions-crds">Custom Resource Definitions (CRDs)</h2>
<p>Kubernetes allows developers to extend the objects its APIs process and store using Custom Resource Definitions (CRDs). We are creating four <a href="https://github.com/cloudfoundry-incubator/quarks-operator/tree/master/docs/crds">CRDs</a> (see <a href="../quarks-operator/development/controllers">Controllers</a>):</p>
<ul>
<li>BOSHDeployment</li>
<li>QuarksJob</li>
<li>QuarksSecret</li>
<li>QuarksStatefulSet</li>
</ul>
<p>The CRDs are also defined in code and applied automatically when cf-operator starts. If you are editing CRDs, you should update changes to this YAML files in sync.</p>
<h2 id="creating-a-new-resource-and-controller">Creating a new Resource and Controller</h2>
<ul>
<li>
<p>create a new directory: <code>./pkg/kube/apis/&lt;group_name&gt;/&lt;version&gt;</code></p>
</li>
<li>
<p>in that directory, create the following files:</p>
<ul>
<li><code>types.go</code></li>
<li><code>register.go</code></li>
<li><code>doc.go</code></li>
</ul>
<blockquote>
<p>You can safely use the implementation from another controller as inspiration.
You can also copy the files and modify them.</p>
</blockquote>
<p>The <code>types.go</code> file contains the definition of your resource. This is the file you care about. Make sure to run <code>make generate</code> <em>every time you make a change</em>. You can also check to see what changes would be done by running <code>make verify-gen-kube</code>.</p>
<p>The <code>register.go</code> file contains some code that registers your new types.
This file looks almost the same for all API resources.</p>
<p>The <code>doc.go</code> (deep object copy) is required to make the <code>deepcopy</code> generator work.
It&rsquo;s safe to copy this file from another controller.</p>
</li>
<li>
<p>in <code>bin/gen-kube</code>, add your resource to the <code>GROUP_VERSIONS</code> variable (separated by a space <code>&quot; &quot;</code>):</p>
<div class="highlight"><div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#999;font-style:italic"># ...</span>
<span style="color:#40ffff">GROUP_VERSIONS</span>=<span style="color:#ed9d13">&#34;boshdeployment:v1alpha1 &lt;controller_name&gt;:&lt;version&gt;&#34;</span>
<span style="color:#999;font-style:italic"># ...</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>regenerate code</p>
<div class="highlight"><div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#999;font-style:italic"># int the root of the project</span>
make generate
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>create a directory structure like this for your actual controller code:</p>
<div class="highlight"><div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-plain" data-lang="plain">.
+-- pkg
   +-- kube
       +-- controllers
           +-- &lt;controller_name&gt;
           ¦   +-- controller.go
           ¦   +-- reconciler.go
           +-- controller.go
</code></pre></td></tr></table>
</div>
</div><ul>
<li><code>controller.go</code> is your controller implementation; this is where you should implement an <code>Add</code> function where register the controller with the <code>Manager</code>, and you watch for changes for resources that you care about.</li>
<li><code>reconciler.go</code> contains the code that takes action and reconciles actual state with desired state.</li>
</ul>
<p>Simple implementation to get you started below.
As always, use the other implementations to get you started.</p>
<p><strong>Controller:</strong></p>
<div class="highlight"><div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6ab825;font-weight:bold">package</span> mycontroller

<span style="color:#6ab825;font-weight:bold">import</span> (
  <span style="color:#ed9d13">&#34;go.uber.org/zap&#34;</span>

  <span style="color:#ed9d13">&#34;sigs.k8s.io/controller-runtime/pkg/controller&#34;</span>
  <span style="color:#ed9d13">&#34;sigs.k8s.io/controller-runtime/pkg/controller/controllerutil&#34;</span>
  <span style="color:#ed9d13">&#34;sigs.k8s.io/controller-runtime/pkg/handler&#34;</span>
  <span style="color:#ed9d13">&#34;sigs.k8s.io/controller-runtime/pkg/manager&#34;</span>
  <span style="color:#ed9d13">&#34;sigs.k8s.io/controller-runtime/pkg/source&#34;</span>

  mrcv1 <span style="color:#ed9d13">&#34;code.cloudfoundry.org/quarks-operator/pkg/kube/apis/myresourcecontroller/v1&#34;</span>
)

<span style="color:#6ab825;font-weight:bold">func</span> <span style="color:#447fcf">Add</span>(log *zap.SugaredLogger, mgr manager.Manager) <span style="color:#6ab825;font-weight:bold">error</span> {
  r := <span style="color:#447fcf">NewReconciler</span>(log, mgr, controllerutil.SetControllerReference)

  <span style="color:#999;font-style:italic">// Create a new controller
</span><span style="color:#999;font-style:italic"></span>  c, err := controller.<span style="color:#447fcf">New</span>(<span style="color:#ed9d13">&#34;myresource-controller&#34;</span>, mgr, controller.Options{Reconciler: r})
  <span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
    <span style="color:#6ab825;font-weight:bold">return</span> err
  }

  <span style="color:#999;font-style:italic">// Watch for changes to primary resource
</span><span style="color:#999;font-style:italic"></span>  err = c.<span style="color:#447fcf">Watch</span>(&amp;source.Kind{Type: &amp;mrcv1.MyResource{}}, &amp;handler.EnqueueRequestForObject{})
  <span style="color:#6ab825;font-weight:bold">if</span> err != <span style="color:#6ab825;font-weight:bold">nil</span> {
    <span style="color:#6ab825;font-weight:bold">return</span> err
  }

  <span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#6ab825;font-weight:bold">nil</span>
}
</code></pre></td></tr></table>
</div>
</div><p><strong>Reconciler:</strong></p>
<div class="highlight"><div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">33
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#6ab825;font-weight:bold">package</span> myresource

<span style="color:#6ab825;font-weight:bold">import</span> (
  <span style="color:#ed9d13">&#34;go.uber.org/zap&#34;</span>
  metav1 <span style="color:#ed9d13">&#34;k8s.io/apimachinery/pkg/apis/meta/v1&#34;</span>
  <span style="color:#ed9d13">&#34;k8s.io/apimachinery/pkg/runtime&#34;</span>
  <span style="color:#ed9d13">&#34;sigs.k8s.io/controller-runtime/pkg/client&#34;</span>
  <span style="color:#ed9d13">&#34;sigs.k8s.io/controller-runtime/pkg/manager&#34;</span>
  <span style="color:#ed9d13">&#34;sigs.k8s.io/controller-runtime/pkg/reconcile&#34;</span>
)

<span style="color:#6ab825;font-weight:bold">type</span> setReferenceFunc <span style="color:#6ab825;font-weight:bold">func</span>(owner, object metav1.Object, scheme *runtime.Scheme) <span style="color:#6ab825;font-weight:bold">error</span>

<span style="color:#6ab825;font-weight:bold">func</span> <span style="color:#447fcf">NewReconciler</span>(log *zap.SugaredLogger, mgr manager.Manager, srf setReferenceFunc) reconcile.Reconciler {
  <span style="color:#6ab825;font-weight:bold">return</span> &amp;ReconcileMyResource{
    log:          log,
    client:       mgr.<span style="color:#447fcf">GetClient</span>(),
    scheme:       mgr.<span style="color:#447fcf">GetScheme</span>(),
    setReference: srf,
  }
}

<span style="color:#6ab825;font-weight:bold">type</span> ReconcileMyResource <span style="color:#6ab825;font-weight:bold">struct</span> {
  client       client.Client
  scheme       *runtime.Scheme
  setReference setReferenceFunc
  log          *zap.SugaredLogger
}

<span style="color:#6ab825;font-weight:bold">func</span> (r *ReconcileMyResource) <span style="color:#447fcf">Reconcile</span>(request reconcile.Request) (reconcile.Result, <span style="color:#6ab825;font-weight:bold">error</span>) {
  r.log.<span style="color:#447fcf">Infof</span>(<span style="color:#ed9d13">&#34;Reconciling MyResource %s\n&#34;</span>, request.NamespacedName)
  <span style="color:#6ab825;font-weight:bold">return</span> reconcile.Result{}, <span style="color:#6ab825;font-weight:bold">nil</span>
}
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>add the new resource to <code>addToSchemes</code> in <code>pkg/controllers/controller.go</code>.</p>
</li>
<li>
<p>add the new controller to <code>addToManagerFuncs</code> in the same file.</p>
</li>
<li>
<p>create a custom resource definition and add docs to <code>docs/crds</code>.</p>
</li>
</ul>
<h3 id="reconcile-results">Reconcile Results</h3>
<div class="highlight"><div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#999;font-style:italic">// RequeueOnError will requeue if reconcile also returns an error
</span><span style="color:#999;font-style:italic"></span>RequeueOnError = reconcile.Result{}
<span style="color:#999;font-style:italic">// Requeue will requeue the request, behaviour is different than returning an error
</span><span style="color:#999;font-style:italic"></span>Requeue = reconcile.Result{Requeue: <span style="color:#6ab825;font-weight:bold">true</span>}
<span style="color:#999;font-style:italic">// RequeueAfterDefault requeues after the default, unless reconcile also returns an error
</span><span style="color:#999;font-style:italic"></span>RequeueAfterDefault = reconcile.Result{RequeueAfter: config.RequeueAfter}
<span style="color:#999;font-style:italic">// NoRequeue does not requeue, unless reconcile also returns an error
</span><span style="color:#999;font-style:italic"></span>NoRequeue = reconcile.Result{Requeue: <span style="color:#6ab825;font-weight:bold">false</span>}
</code></pre></td></tr></table>
</div>
</div><h3 id="testing">Testing</h3>
<ul>
<li>create functions in <code>env/machine</code></li>
<li>create functions in <code>env/catalog</code></li>
</ul>
<h2 id="create-or-update-pattern">Create-Or-Update pattern</h2>
<p>A pattern that comes up quite often is that an object needs to be updated if it already exists or created if it doesn&rsquo;t. <code>controller-runtime</code> provides the <code>controller-util</code> package which has a <code>CreateOrUpdate</code> function that can help with that. The object&rsquo;s desired state must be reconciled with the existing state inside the passed in callback MutateFn - <code>type MutateFn func() error</code>. The MutateFn is called regardless of creating or updating an object.</p>
<div class="highlight"><div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">_, err = controllerutil.<span style="color:#447fcf">CreateOrUpdate</span>(ctx, r.client, someSecret, <span style="color:#447fcf">secretMutateFn</span>(someSecret, someSecret.StringData, someSecret.Labels, someSecret.Annotations))

<span style="color:#6ab825;font-weight:bold">func</span> <span style="color:#447fcf">secretMutateFn</span>(s *corev1.Secret, secretData <span style="color:#6ab825;font-weight:bold">map</span>[<span style="color:#6ab825;font-weight:bold">string</span>]<span style="color:#6ab825;font-weight:bold">string</span>, labels <span style="color:#6ab825;font-weight:bold">map</span>[<span style="color:#6ab825;font-weight:bold">string</span>]<span style="color:#6ab825;font-weight:bold">string</span>, annotations <span style="color:#6ab825;font-weight:bold">map</span>[<span style="color:#6ab825;font-weight:bold">string</span>]<span style="color:#6ab825;font-weight:bold">string</span>) controllerutil.MutateFn {
  <span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#6ab825;font-weight:bold">func</span>() <span style="color:#6ab825;font-weight:bold">error</span> {
    s.Labels = labels
    s.Annotations = annotations
    s.StringData = secretData
    <span style="color:#6ab825;font-weight:bold">return</span> <span style="color:#6ab825;font-weight:bold">nil</span>
  }
}
</code></pre></td></tr></table>
</div>
</div><ul>
<li>Care must be taken when persisting objects that are already in their final state because they will be overwritten with the existing state if there already is such an object in the system.</li>
<li><code>CreateOrUpdate</code>s should not use blindly <code>DeepCopyInto</code> or <code>DeepCopy</code> all the time, but make more precise changes.</li>
</ul>
<h2 id="logging-and-events">Logging and Events</h2>
<p>We start with a single context and pass that down via controllers into
reconcilers. Reconcilers will create a context with timeout from the inherited
context and linting will check if the <code>cancel()</code> function of that context is
being handled.</p>
<p>The <code>ctxlog</code> module provides a context with a named zap logger and an event recorder to the reconcilers.
This is how it&rsquo;s set up for reconcilers:</p>
<div class="highlight"><div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#999;font-style:italic">// after logger is available
</span><span style="color:#999;font-style:italic"></span>ctx := ctxlog.<span style="color:#447fcf">NewParentContext</span>(log)
<span style="color:#999;font-style:italic">// adding named log and event recorder in controllers
</span><span style="color:#999;font-style:italic"></span>ctx = ctxlog.<span style="color:#447fcf">NewContextWithRecorder</span>(ctx, <span style="color:#ed9d13">&#34;example-reconciler&#34;</span>, mgr.<span style="color:#447fcf">GetEventRecorderFor</span>(<span style="color:#ed9d13">&#34;example-recorder&#34;</span>))
<span style="color:#999;font-style:italic">// adding timeout in reconcilers
</span><span style="color:#999;font-style:italic"></span>ctx, cancel := context.<span style="color:#447fcf">WithTimeout</span>(ctx, timeout)
<span style="color:#6ab825;font-weight:bold">defer</span> <span style="color:#447fcf">cancel</span>()
</code></pre></td></tr></table>
</div>
</div><p>The <code>ctxlog</code> package provides several logging functions. <code>Infof</code>, <code>Errorf</code>, <code>Error</code> and such wrap the corresponding zap log methods.</p>
<p>The logging functions are also implemented on struct, to add event generation to the logging:</p>
<div class="highlight"><div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">ctxlog.<span style="color:#447fcf">WithEvent</span>(instance, <span style="color:#ed9d13">&#34;Reason&#34;</span>).<span style="color:#447fcf">Infof</span>(<span style="color:#ed9d13">&#34;message: %s&#34;</span>, v)
err := ctxlog.<span style="color:#447fcf">WithEvent</span>(instance, <span style="color:#ed9d13">&#34;Reason&#34;</span>).<span style="color:#447fcf">Errorf</span>(<span style="color:#ed9d13">&#34;message: %s&#34;</span>, v)
err := ctxlog.<span style="color:#447fcf">WithEvent</span>(instance, <span style="color:#ed9d13">&#34;Reason&#34;</span>).<span style="color:#447fcf">Error</span>(<span style="color:#ed9d13">&#34;part&#34;</span>, <span style="color:#ed9d13">&#34;part&#34;</span>, <span style="color:#ed9d13">&#34;part&#34;</span>)
</code></pre></td></tr></table>
</div>
</div><p>The reason should be camel-case, so switch statements could match it.</p>
<p>Error funcs like <code>WithEvent().Errorf()</code> also return an error, with the same message as the log message and event that were generated.</p>
<p>Calling <code>WarningEvent</code> just creates a warning event, without logging.</p>
<h2 id="standalone-components">Standalone Components</h2>
<p>The cf-operator uses quarks-job as an external component.
The quarks-job operator is run in a separate process.</p>
<p>When using jobs that capture output, quarks-job needs to know its docker image, to run the <code>persist-output</code> command in a container.</p>
<h3 id="references-in-cf-operator">References in cf-operator</h3>
<p>References to quarks job:</p>
<ul>
<li>as a library, for the API type, via git commit sha in <code>go.mod</code>:
&lsquo;b5dc240&rsquo;</li>
<li>the docker image for integration tests is set via  <code>QUARKS_JOB_IMAGE_TAG</code>:
&lsquo;v0.0.0-0.gb5dc240&rsquo;</li>
<li>releases and e2e test use the helm sub chart, build by <code>bin/build-helm</code>, which uses the <code>QUARKS_JOB_HELM_VERSION</code> variable:
&lsquo;0.0.0-0.gb5dc240&rsquo;</li>
</ul>
<p>Both variables are set in <code>bin/include/dependencies</code>.</p>
<h3 id="update-dependencies">Update Dependencies</h3>
<p>To update a dependency in a project use <code>go get</code>, e.g.:</p>
<pre><code>go get -t -u code.cloudfoundry.org/quarks-job@aad515c
</code></pre><p>Using the git commit sha prevents caching problems, which might occur with branch names.</p>
<h3 id="local-development-and-go-mod-replace">Local Development And go mod &lsquo;replace&rsquo;</h3>
<p>When working locally with multiple repositories it&rsquo;s helpful to replace github dependencies with local directories. The <code>go mod edit -replace</code> will modify the <code>go.mod</code> file to point to a local dir, e.g. &lsquo;../quarks-job&rsquo; instead:</p>
<pre><code>go mod edit -replace code.cloudfoundry.org/quarks-utils=../quarks-utils
go mod edit -replace code.cloudfoundry.org/quarks-job=../quarks-job
</code></pre><h3 id="building-docker-image-when-using-go-mod-replace">Building Docker Image When Using go mod &lsquo;replace&rsquo;</h3>
<p>The modified libraries are not visible to the container. As a workaround a vendor folder can be used, which is also faster:</p>
<pre><code>GO111MODULE=on go mod vendor
GO111MODULE=off make build-image
rm -fr vendor
</code></pre><h3 id="use-a-local-quarksjob-image-in-integration-tests">Use a Local QuarksJob Image in Integration Tests</h3>
<p>To use a local docker image export <code>QUARKS_JOB_IMAGE_TAG</code> and make sure the image is available to the cluster, e.g. for kind:</p>
<pre><code>kind load docker-image cfcontainerization/cf-operator:$DOCKER_IMAGE_TAG
kind load docker-image cfcontainerization/quarks-job:$QUARKS_JOB_IMAGE_TAG
</code></pre><h3 id="use-a-local-quarksjob-image-in-integration-tests-with-kubernetes-for-docker-desktop">Use a Local QuarksJob Image in Integration Tests with Kubernetes for Docker Desktop</h3>
<p>To use a local docker image export <code>QUARKS_JOB_IMAGE_TAG</code> and make sure the image is available to the cluster, e.g. for kind:</p>
<pre><code>docker tag &lt;cf-operator-tag&gt; cfcontainerization/cf-operator:$DOCKER_IMAGE_TAG
docker tag &lt;quarks-job-tag&gt; cfcontainerization/quarks-job:$QUARKS_JOB_IMAGE_TAG
</code></pre><h3 id="merging-prs">Merging PRs</h3>
<ul>
<li>In PR reviews, make sure only reviewed branches of dependencies are used.</li>
<li>If several PRs across repos belong together, be careful to merge them together and in order, so that the master branches stay compatible if one of the merges fails.</li>
<li>Make sure that the cf-operator repo PR has updated value of quarks image tag or version at these places
<ul>
<li><a href="https://github.com/cloudfoundry-incubator/cf-operator/blob/master/bin/include/dependencies#L3">Dependency File</a></li>
<li><a href="https://github.com/cloudfoundry-incubator/cf-operator/blob/master/go.mod">Go mod file</a></li>
</ul>
</li>
</ul>
<h2 id="versioning">Versioning</h2>
<p>APIs and types follow the upstream versioning scheme described at: <a href="https://kubernetes.io/docs/concepts/overview/kubernetes-api/#api-versioning">https://kubernetes.io/docs/concepts/overview/kubernetes-api/#api-versioning</a></p>
<h2 id="colourise-logs">Colourise Logs</h2>
<p>Copy the <a href="https://github.com/garabik/grc">grc</a> (generic colouriser grcat) config file <a href="https://github.com/cloudfoundry-incubator/quarks-operator/blob/master/docs/zap.grc.conf">zap.grc.conf</a> to <code>/usr/share/grc/conf.zap</code> and pipe logs to <code>grcat conf.zap</code>:</p>
<pre><code># install the custom log config
cp docs/zap.grc.conf /usr/share/grc/conf.zap

# running operator
kubectl get pods -A -l name=cf-operator --no-headers=true | tail -1 | read namespace name _
kubectl logs -f -n &quot;$namespace&quot; &quot;$name&quot; | grcat conf.zap

# integration tests example
grcat conf.zap &lt; /tmp/cf-operator-tests.log
</code></pre>
        <div class="section-index">
    
    
    
    
    <hr class="panel-line">
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
                <div class="entry">
                    <h5>
                        <a href="/docs/development/building/">Build</a>
                    </h5>
                    <p>Build Quarks-operator from source</p>
                </div>
            
        
            
                <div class="entry">
                    <h5>
                        <a href="/docs/development/testing/">Testing</a>
                    </h5>
                    <p></p>
                </div>
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
                <div class="entry">
                    <h5>
                        <a href="/docs/development/tooling/">Nice tools to use</a>
                    </h5>
                    <p>Tools to simplify your development workflow</p>
                </div>
            
        
            
        
            
        
            
        
            
                <div class="entry">
                    <h5>
                        <a href="/docs/development/naming/">Naming Conventions</a>
                    </h5>
                    <p></p>
                </div>
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
                <div class="entry">
                    <h5>
                        <a href="/docs/development/about_operators/">About operators</a>
                    </h5>
                    <p>Useful links to Kubernetes operators implementations or patterns</p>
                </div>
            
        
            
        
    
</div>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified November 5, 2020: <a  href="https://github.com/cloudfoundry-incubator/quarks-docs/commit/3f0a191bbd9ffc33bbad2d8d009314176ff461ff">Merge pull request #27 from cloudfoundry-incubator/align_colors (3f0a191)</a>
</div>
</div>

          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" href="https://github.com/cloudfoundry-incubator/quarks-operator/">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" href="https://cloudfoundry.slack.com/archives/C1BQKKNP4">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2020 CloudFoundry.org Foundation, Inc. All Rights Reserved. All Rights Reserved</small>
        
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>









<script src="/js/main.min.664f21bf5eb0c31ebc661e2616e6c63e0448cec6d5636d869957be423c3cb952.js" integrity="sha256-Zk8hv16wwx68Zh4mFubGPgRIzsbVY22GmVe&#43;Qjw8uVI=" crossorigin="anonymous"></script>



  </body>
</html>